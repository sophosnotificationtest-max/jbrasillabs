<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JBrasil Labs - Cybersegurança & Redes</title>

<script src="https://cdn.tailwindcss.com"></script>
<script>tailwind.config = { darkMode: 'class' }</script>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<link rel="icon" href="https://raw.githubusercontent.com/sophosnotificationtest-max/jbrasillabs/main/logo.png" type="image/png">

<style>
body { font-family: 'Orbitron', sans-serif; background:black; color:#00ff00; margin:0; overflow-x:hidden; }

.logo-container {
  position: fixed; top:50%; left:50%; transform: translate(-50%, -50%);
  text-align:center; z-index:10;
}
.logo-container img { width:350px; height:350px; cursor:pointer; }

.hidden-content { opacity:0; visibility:hidden; transition:opacity 1s; }
.visible-content { opacity:1; visibility:visible; transition:opacity 1s; }

footer { text-align:right; color:#00ff00; margin:0; z-index:5; position:fixed; bottom:10px; right:10px; font-family:monospace; font-size:14px; }

#lang-switch { position:fixed; top:10px; right:10px; background:rgba(0,0,0,0.5); color:#00ff00; border:1px solid #00ff00; border-radius:4px; padding:3px 6px; z-index:20; cursor:pointer; }

#terminal { position:fixed; bottom:10px; left:10px; font-family:monospace; font-size:12px; color:#00ff00; z-index:20; }

.terminal-line { position:relative; transform:translateY(100%); opacity:0; animation:moveUp 8s linear forwards; }

@keyframes moveUp {
  0% { transform:translateY(100%); opacity:0; }
  10%, 90% { opacity:1; }
  100% { transform:translateY(-100%); opacity:0; }
}
</style>
</head>
<body>

<div class="logo-container" id="logo-container">
  <img src="https://raw.githubusercontent.com/sophosnotificationtest-max/jbrasillabs/main/logo.png" alt="Logo" id="logo">
</div>

<select id="lang-switch">
  <option value="pt">PT</option>
  <option value="es">ES</option>
</select>

<ul id="terminal"></ul>

<div id="main-content" class="hidden-content">
  <section class="hero flex flex-col items-center justify-center text-center mt-40 px-4">
    <h2 id="hero-title" class="text-6xl font-extrabold text-green-400 mb-6"></h2>
    <p id="hero-text" class="text-xl text-gray-200 mb-10 max-w-3xl"></p>
  </section>

  <section id="services" class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-20 max-w-6xl mx-auto px-4">
    <div class="glow-card p-6 bg-black rounded hover:scale-105 transform transition">
      <h3 id="service1-title" class="text-2xl font-bold text-green-300 mb-2"></h3>
      <p id="service1-text" class="text-gray-200"></p>
    </div>
    <div class="glow-card p-6 bg-black rounded hover:scale-105 transform transition">
      <h3 id="service2-title" class="text-2xl font-bold text-green-300 mb-2"></h3>
      <p id="service2-text" class="text-gray-200"></p>
    </div>
    <div class="glow-card p-6 bg-black rounded hover:scale-105 transform transition">
      <h3 id="service3-title" class="text-2xl font-bold text-green-300 mb-2"></h3>
      <p id="service3-text" class="text-gray-200"></p>
    </div>
  </section>

  <section id="contact" class="bg-black rounded mt-20 text-center p-10 mx-4 glow-card">
    <h2 id="contact-title" class="text-4xl font-bold text-green-400 mb-6"></h2>
    <p id="contact-text" class="mb-6 text-lg text-gray-200"></p>
    <a href="mailto:jonas.brasil@jbrasillabs.com.br" id="contact-button" class="px-10 py-4 neon-button rounded font-bold text-lg transition"></a>
  </section>
</div>

<footer id="visitor-counter">Visitantes conectados: 0 | Total visitas: 0 | Cliques email: 0</footer>

<script>
let terminalInterval, visitors=[], emailHits=parseInt(localStorage.getItem('emailHits')||'0');
let totalVisits=parseInt(localStorage.getItem('totalVisits')||'0')+1;
localStorage.setItem('totalVisits', totalVisits);

const translations = { /* MESMO JSON DE TRADUCOES PT/ES do código anterior */ };

async function getVisitorInfo() {
  try {
    const res = await fetch('https://geolocation-db.com/json/');
    const data = await res.json();
    return { ip:data.IPv4||'192.168.0.1', country:data.country_name||'Desconhecido' };
  } catch {
    return { ip:`192.168.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,
             country:['Brazil','Argentina','Mexico','Chile','Colombia'][Math.floor(Math.random()*5)] };
  }
}

async function startTerminalAnimation(lines){
  const terminal = document.getElementById('terminal');
  if(terminalInterval) clearInterval(terminalInterval);
  terminal.innerHTML='';

  const visitor = await getVisitorInfo();
  if(!visitors.find(v=>v.ip===visitor.ip)) visitors.push(visitor);
  updateFooter();

  let index=0;
  terminalInterval=setInterval(()=>{
    let line = lines[index];
    if(Math.random()<0.25 && visitors.length>0){
      const v=visitors[Math.floor(Math.random()*visitors.length)];
      line = `[LOGIN] ${v.ip} (${v.country}) conectou à página`;
      sendLog(line);
      updateFooter();
    }
    const div=document.createElement('div');
    div.textContent=line;
    div.className='terminal-line';
    terminal.appendChild(div);
    if(terminal.children.length>50) terminal.removeChild(terminal.children[0]);
    index=(index+1)%lines.length;
  },800);
}

function updateFooter(){
  document.getElementById('visitor-counter').textContent =
    `Visitantes conectados: ${visitors.length} | Total visitas: ${totalVisits} | Cliques email: ${emailHits}`;
}

function applyTranslations(lang){
  const t=translations[lang]||translations.pt;
  document.getElementById('hero-title').textContent=t.heroTitle;
  document.getElementById('hero-text').textContent=t.heroText;
  document.getElementById('service1-title').textContent=t.service1Title;
  document.getElementById('service1-text').textContent=t.service1Text;
  document.getElementById('service2-title').textContent=t.service2Title;
  document.getElementById('service2-text').textContent=t.service2Text;
  document.getElementById('service3-title').textContent=t.service3Title;
  document.getElementById('service3-text').textContent=t.service3Text;
  document.getElementById('contact-title').textContent=t.contactTitle;
  document.getElementById('contact-text').textContent=t.contactText;
  document.getElementById('contact-button').textContent=t.contactButton;

  startTerminalAnimation(t.terminalLines);
}

// Detecta idioma
const userLang = navigator.language.startsWith('es')?'es':'pt';
document.getElementById('lang-switch').value=userLang;
applyTranslations(userLang);
document.getElementById('lang-switch').addEventListener('change', e=>applyTranslations(e.target.value));

// Logo clicável
document.getElementById('logo').addEventListener('click', ()=>{
  document.getElementById('logo-container').style.display='none';
  document.getElementById('main-content').classList.add('visible-content');
});

// Email click
document.getElementById('contact-button').addEventListener('click', ()=>{
  emailHits++;
  localStorage.setItem('emailHits', emailHits);
  const div=document.createElement('div');
  div.textContent='[EMAIL CLICK] Usuário clicou no email!';
  div.className='terminal-line';
  document.getElementById('terminal').appendChild(div);
  sendLog(div.textContent);
  updateFooter();
});

// Envia log para server_drive.py
function sendLog(entry){
  fetch('https://jbrasillabs-1.onrender.com/log',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({entry})
  }).catch(e=>console.log('Erro enviando log:',e));
}
</script>

</body>
</html>

