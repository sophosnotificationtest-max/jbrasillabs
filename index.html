<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JBrasil Labs - Cybersegurança & Redes</title>

<script src="https://cdn.tailwindcss.com"></script>
<script>tailwind.config = { darkMode: 'class' }</script>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">
<link rel="icon" href="https://raw.githubusercontent.com/sophosnotificationtest-max/jbrasillabs/main/logo.png" type="image/png">

<style>
body { font-family: 'Orbitron', sans-serif; background:black; color:#00ff00; margin:0; overflow-x:hidden; }

.logo-container {
  position: fixed; top:50%; left:50%; transform: translate(-50%, -50%);
  text-align:center; z-index:10;
}
.logo-container img { width:350px; height:350px; cursor:pointer; }

.hidden-content { opacity:0; visibility:hidden; transition:opacity 1s; }
.visible-content { opacity:1; visibility:visible; transition:opacity 1s; }

footer { text-align:right; color:#00ff00; margin:0; z-index:5; position:fixed; bottom:10px; right:10px; font-family:monospace; font-size:14px; }

#lang-switch { position:fixed; top:10px; right:10px; background:rgba(0,0,0,0.5); color:#00ff00; border:1px solid #00ff00; border-radius:4px; padding:3px 6px; z-index:20; cursor:pointer; }

#terminal {
  position:fixed; bottom:10px; left:10px; font-family:monospace;
  font-size:12px; color:#00ff00; z-index:0; pointer-events:none;
  width:calc(100% - 20px); max-height:300px; overflow:hidden;
}

.terminal-line { opacity:0; transform: translateY(100%); animation:moveUp 8s linear forwards; }

@keyframes moveUp {
  0% { transform:translateY(100%); opacity:0; }
  10%, 90% { opacity:1; }
  100% { transform:translateY(-100%); opacity:0; }
}

.terminal-bg {
  position: fixed; top:0; left:0; width:100%; height:100%;
  background:black; color:#00ff00; font-family:monospace;
  font-size:15px; opacity:0.05; z-index:-1; white-space:pre; overflow:hidden;
}
</style>
</head>
<body>

<div class="terminal-bg" id="terminal-bg"></div>

<div class="logo-container" id="logo-container">
  <img src="https://raw.githubusercontent.com/sophosnotificationtest-max/jbrasillabs/main/logo.png" alt="Logo" id="logo">
</div>

<select id="lang-switch">
  <option value="pt">PT</option>
  <option value="es">ES</option>
</select>

<ul id="terminal"></ul>

<div id="main-content" class="hidden-content">
  <section class="hero flex flex-col items-center justify-center text-center mt-40 px-4">
    <h2 id="hero-title" class="text-6xl font-extrabold text-green-400 mb-6"></h2>
    <p id="hero-text" class="text-xl text-gray-200 mb-10 max-w-3xl"></p>
  </section>

  <section id="services" class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-20 max-w-6xl mx-auto px-4">
    <div class="glow-card p-6 bg-black rounded hover:scale-105 transform transition">
      <h3 id="service1-title" class="text-2xl font-bold text-green-300 mb-2"></h3>
      <p id="service1-text" class="text-gray-200"></p>
    </div>
    <div class="glow-card p-6 bg-black rounded hover:scale-105 transform transition">
      <h3 id="service2-title" class="text-2xl font-bold text-green-300 mb-2"></h3>
      <p id="service2-text" class="text-gray-200"></p>
    </div>
    <div class="glow-card p-6 bg-black rounded hover:scale-105 transform transition">
      <h3 id="service3-title" class="text-2xl font-bold text-green-300 mb-2"></h3>
      <p id="service3-text" class="text-gray-200"></p>
    </div>
  </section>

  <section id="contact" class="bg-black rounded mt-20 text-center p-10 mx-4 glow-card">
    <h2 id="contact-title" class="text-4xl font-bold text-green-400 mb-6"></h2>
    <p id="contact-text" class="mb-6 text-lg text-gray-200"></p>
    <a href="mailto:jonas.brasil@jbrasillabs.com.br" id="contact-button" class="px-10 py-4 neon-button rounded font-bold text-lg transition"></a>
  </section>
</div>

<script>
const terminal = document.getElementById('terminal');
const terminalBg = document.getElementById('terminal-bg');

// Traduções
const translations = {
  pt: {
    heroTitle: "Cybersegurança & Redes Corporativas",
    heroText: "Proteção avançada com Sophos Firewall, Sophos Central Email e suporte técnico especializado.",
    service1Title: "Sophos Firewall",
    service1Text: "Configuração, implementação, migração e suporte em firewalls Sophos para máxima proteção de rede.",
    service2Title: "Sophos Central Email",
    service2Text: "Proteção de email com políticas de segurança, filtragem e anti-spam avançado com solução Sophos Email Advanced.",
    service3Title: "Suporte Técnico",
    service3Text: "Consultoria e suporte remoto ou presencial para redes corporativas e infraestrutura para toda Latino América.",
    contactTitle: "Entre em Contato",
    contactText: "Solicite uma consultoria personalizada ou tire suas dúvidas.",
    contactButton: "Enviar Email"
  },
  es: {
    heroTitle: "Ciberseguridad & Redes Corporativas",
    heroText: "Protección avanzada con Sophos Firewall, Sophos Central Email y soporte técnico especializado.",
    service1Title: "Sophos Firewall",
    service1Text: "Configuración, implementación, migración y soporte en firewalls Sophos para máxima protección de red.",
    service2Title: "Sophos Central Email",
    service2Text: "Protección de correo electrónico con políticas de seguridad, filtrado y anti-spam avanzado con solución Sophos Email Advanced.",
    service3Title: "Soporte Técnico",
    service3Text: "Consultoría y soporte remoto o presencial para redes corporativas e infraestructura para toda Latinoamérica.",
    contactTitle: "Contáctanos",
    contactText: "Solicita una consultoría personalizada o envie sus dudas.",
    contactButton: "Enviar Correo"
  }
};

// Detecta idioma
const userLang = navigator.language.startsWith('es')?'es':'pt';
document.getElementById('lang-switch').value = userLang;
applyTranslations(userLang);
document.getElementById('lang-switch').addEventListener('change', e=>applyTranslations(e.target.value));

function applyTranslations(lang){
  const t = translations[lang] || translations.pt;
  document.getElementById('hero-title').textContent = t.heroTitle;
  document.getElementById('hero-text').textContent = t.heroText;
  document.getElementById('service1-title').textContent = t.service1Title;
  document.getElementById('service1-text').textContent = t.service1Text;
  document.getElementById('service2-title').textContent = t.service2Title;
  document.getElementById('service2-text').textContent = t.service2Text;
  document.getElementById('service3-title').textContent = t.service3Title;
  document.getElementById('service3-text').textContent = t.service3Text;
  document.getElementById('contact-title').textContent = t.contactTitle;
  document.getElementById('contact-text').textContent = t.contactText;
  document.getElementById('contact-button').textContent = t.contactButton;
}

// -----------------------------
// Captura IP e país do visitante
// -----------------------------
async function getVisitorInfo(){
  try{
    const res = await fetch('https://geolocation-db.com/json/');
    const data = await res.json();
    return {ip:data.IPv4||'192.168.0.1', country:data.country_name||'Desconhecido'};
  }catch{
    return {ip:`192.168.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`,
            country:['Brazil','Argentina','Mexico','Chile','Colombia'][Math.floor(Math.random()*5)]};
  }
}

// -----------------------------
// Envia log para o servidor Flask
// -----------------------------
function sendLog(entry){
  fetch('https://jbrasillabs-1.onrender.com/log',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({entry})
  }).catch(e=>console.log('[Erro Log]', e));
}

// -----------------------------
// Logo clicável
// -----------------------------
document.getElementById('logo').addEventListener('click', async ()=>{
  document.getElementById('logo-container').style.display='none';
  document.getElementById('main-content').classList.add('visible-content');

  // Deixa terminal de fundo mais opaco
  terminalBg.style.opacity = 0.2;

  // Envia log do visitante
  const visitor = await getVisitorInfo();
  const entry = `[SOC] ${visitor.ip} (${visitor.country}) entrou na página`;
  sendLog(entry);

  // Mostra no terminal
  const div = document.createElement('div');
  div.textContent = entry;
  div.className = 'terminal-line';
  terminal.appendChild(div);
});

// -----------------------------
// Click no botão de email
// -----------------------------
document.getElementById('contact-button').addEventListener('click', ()=>{
  const entry = '[SOC] Usuário clicou no email';
  sendLog(entry);

  const div = document.createElement('div');
  div.textContent = entry;
  div.className = 'terminal-line';
  terminal.appendChild(div);
});
</script>
</body>
</html>
