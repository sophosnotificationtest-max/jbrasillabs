<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JBrasil Labs - Cyber Defense</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Orbitron', sans-serif; }
        
        /* Jogo em Tela Cheia */
        #game-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; cursor: crosshair; }
        #game-canvas { width: 100%; height: 100%; }

        /* HUD do Jogo (Placar) */
        .hud { position: fixed; top: 20px; left: 20px; z-index: 100; font-family: 'Press Start 2P', cursive; font-size: 12px; color: #00ff00; pointer-events: none; text-shadow: 0 0 10px #00ff00; }
        
        /* Footer Fixo */
        #footer-fixed { position: fixed; bottom: 15px; right: 15px; font-size: 10px; color: #004400; z-index: 100; font-family: monospace; pointer-events: none; }

        /* Logo Inicial / Start */
        #start-screen { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; z-index: 200; transition: 0.8s; }
        #main-logo { width: 300px; cursor: pointer; filter: drop-shadow(0 0 20px #00ff00); transition: 0.3s; }
        #main-logo:hover { transform: scale(1.05); }
        .start-prompt { margin-top: 20px; font-family: 'Press Start 2P', cursive; font-size: 14px; color: #00ff00; animation: blink 1s infinite; cursor: pointer; }

        /* Conte칰do do Site (Aparece ap칩s o Start) */
        #main-content { position: relative; z-index: 50; padding-top: 100px; opacity: 0; visibility: hidden; transition: 2s; pointer-events: none; }
        .visible-content { opacity: 1 !important; visibility: visible !important; pointer-events: auto !important; }

        .welcome-box { border: 2px solid #00ff00; padding: 30px; background: rgba(0, 10, 0, 0.85); box-shadow: 0 0 30px #00ff0033; max-width: 700px; margin: 0 auto; text-align: center; }
        
        /* Terminal estilo Hacker */
        #terminal { position: fixed; bottom: 15px; left: 15px; font-family: monospace; z-index: 150; color: #00ff00; width: 50%; max-height: 150px; overflow: hidden; pointer-events: none; }
        .terminal-line { background: rgba(0,0,0,0.7); margin-bottom: 2px; padding: 2px 8px; font-size: 11px; border-left: 2px solid #00ff00; }

        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div id="footer-fixed">춸 2026 JBRASIL LABS. ALL RIGHTS RESERVED.</div>

<div id="terminal"></div>

<div class="hud" id="hud" style="display: none;">
    SCORE: <span id="score">0000</span><br>
    SHIELD: <span id="lives">III</span>
</div>

<div id="game-container">
    <canvas id="game-canvas"></canvas>
</div>

<div id="start-screen">
    <img src="https://raw.githubusercontent.com/sophosnotificationtest-max/jbrasillabs/main/logo.png" id="main-logo" alt="JBrasil Labs">
    <div class="start-prompt" id="start-btn">PRESS START</div>
</div>

<div id="main-content" class="container mx-auto px-6">
    <div class="welcome-box">
        <h2 id="hero-title" class="text-2xl font-bold mb-4 uppercase text-green-400"></h2>
        <p id="hero-text" class="text-sm text-gray-400 mb-8"></p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-left">
            <div class="border border-green-900 p-4 bg-black/50">
                <h3 id="service1-title" class="text-green-500 text-xs font-bold mb-2"></h3>
                <p id="service1-text" class="text-[10px] text-gray-500"></p>
            </div>
            <div class="border border-green-900 p-4 bg-black/50">
                <h3 id="service2-title" class="text-green-500 text-xs font-bold mb-2"></h3>
                <p id="service2-text" class="text-[10px] text-gray-500"></p>
            </div>
            <div class="border border-green-900 p-4 bg-black/50">
                <h3 id="service3-title" class="text-green-500 text-xs font-bold mb-2"></h3>
                <p id="service3-text" class="text-[10px] text-gray-500"></p>
            </div>
        </div>
        <div class="mt-8">
            <a id="contact-button" href="mailto:jonas.brasil@jbrasillabs.com.br" class="text-xs border border-green-500 px-6 py-2 hover:bg-green-500 hover:text-black transition"></a>
        </div>
    </div>
</div>

<script>
// --- CORE DO JOGO ---
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');
let score = 0, lives = 3, enemies = [], bullets = [], gameActive = false;
let mouseX = window.innerWidth / 2;

function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
window.addEventListener('resize', resize); resize();

window.addEventListener('mousemove', (e) => { mouseX = e.clientX; });

class Enemy {
    constructor() {
        this.x = Math.random() * (canvas.width - 40) + 20;
        this.y = -30;
        this.speed = 1.5 + (score / 500); // Fica mais r치pido com o tempo
    }
    draw() {
        ctx.font = "30px serif";
        ctx.fillText("游", this.x - 15, this.y);
    }
}

class Bullet {
    constructor(x) { this.x = x; this.y = canvas.height - 50; this.speed = 12; }
    draw() {
        ctx.fillStyle = "#00ff00";
        ctx.fillRect(this.x - 1, this.y, 3, 20);
    }
}

// Disparo
window.addEventListener('keydown', (e) => { 
    if(e.code === "Space" && gameActive) { 
        e.preventDefault(); 
        bullets.push(new Bullet(mouseX)); 
    } 
});
canvas.addEventListener('mousedown', () => { if(gameActive) bullets.push(new Bullet(mouseX)); });

function gameLoop() {
    ctx.fillStyle = "rgba(0, 0, 0, 0.2)"; // Efeito de rastro
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    if(!gameActive) { requestAnimationFrame(gameLoop); return; }

    if(Math.random() < 0.03) enemies.push(new Enemy());

    bullets.forEach((b, bi) => {
        b.y -= b.speed;
        b.draw();
        if(b.y < 0) bullets.splice(bi, 1);
        enemies.forEach((e, ei) => {
            if(Math.hypot(e.x - b.x, e.y - b.y) < 30) {
                enemies.splice(ei, 1); bullets.splice(bi, 1);
                score += 10;
                document.getElementById('score').innerText = score.toString().padStart(4, '0');
            }
        });
    });

    enemies.forEach((e, i) => {
        e.y += e.speed;
        e.draw();
        if(e.y > canvas.height) {
            enemies.splice(i, 1);
            lives--;
            updateLivesHUD();
            if(lives <= 0) gameOver();
        }
    });
    requestAnimationFrame(gameLoop);
}

function updateLivesHUD() {
    document.getElementById('lives').innerText = "I".repeat(Math.max(0, lives));
}

function gameOver() {
    logTerminal("[!] CRITICAL FAILURE: SISTEMA COMPROMETIDO");
    lives = 3; score = 0; 
    document.getElementById('score').innerText = "0000";
    updateLivesHUD();
}

// --- LOGS E TRANSLATIONS ---
const translations = {
    pt: {
        "hero-title": "JBrasil Labs - Cyberseguran칞a",
        "hero-text": "Prote칞칚o de dados e infraestrutura Sophos avan칞ada.",
        "service1-title": "SOPHOS FIREWALL", "service1-text": "Suporte e Migra칞칚o.",
        "service2-title": "SOPHOS EMAIL", "service2-text": "Anti-Phishing & Spam.",
        "service3-title": "SOPORTE SOC", "service3-text": "Consultoria Remota 24/7.",
        "contact-button": "CONTATO@JBRASILLABS"
    },
    es: {
        "hero-title": "JBrasil Labs - Seguridad",
        "hero-text": "Protecci칩n de datos e infraestructura Sophos.",
        "service1-title": "SOPHOS FIREWALL", "service1-text": "Soporte y Migraci칩n.",
        "service2-title": "SOPHOS EMAIL", "service2-text": "Anti-Phishing & Spam.",
        "service3-title": "SOPORTE SOC", "service3-text": "Consultor칤a Remota 24/7.",
        "contact-button": "CONTACTO@JBRASILLABS"
    }
};

function logTerminal(msg) {
    const p = document.createElement('p');
    p.className = 'terminal-line';
    p.textContent = `> ${msg}`;
    const term = document.getElementById('terminal');
    term.appendChild(p);
    term.scrollTop = term.scrollHeight;
    setTimeout(() => p.remove(), 10000);
}

// --- START ACTION ---
document.getElementById('main-logo').addEventListener('click', startSystem);
document.getElementById('start-btn').addEventListener('click', startSystem);

async function startSystem() {
    if(gameActive) return;
    
    document.getElementById('start-screen').style.opacity = '0';
    setTimeout(() => {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('main-content').classList.add('visible-content');
        document.getElementById('hud').style.display = 'block';
        gameActive = true;
    }, 800);

    logTerminal("INITIALIZING DEFENSE PROTOCOLS...");
    logTerminal("CONNECTING TO SOC...");

    try {
        const info = await fetch('https://jbrasillabs-1.onrender.com/geoip').then(r => r.json());
        logTerminal(`[OK] ACCESS GRANTED: ${info.entry}`);
        fetch('https://jbrasillabs-1.onrender.com/log', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ entry: info.entry })
        });
    } catch {
        logTerminal("[!] OFFLINE MODE ACTIVATED");
    }
}

function applyLang() {
    const lang = navigator.language.startsWith('es') ? 'es' : 'pt';
    const t = translations[lang];
    Object.keys(t).forEach(id => { if(document.getElementById(id)) document.getElementById(id).textContent = t[id]; });
}

applyLang();
gameLoop();
</script>
</body>
</html>
