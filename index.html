<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>JBrasil Labs - Atari SOC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Press Start 2P', cursive; cursor: none; color: #00ff00; }
        canvas { position: fixed; inset: 0; z-index: 1; image-rendering: pixelated; }
        .hud { position: fixed; top: 20px; left: 20px; z-index: 100; font-size: 12px; pointer-events: none; color: #fff; }
        #geo-terminal { position: fixed; bottom: 80px; left: 20px; z-index: 200; font-size: 10px; background: rgba(0,0,0,0.8); padding: 10px; border: 2px solid #00ff00; }
        .overlay { position: fixed; inset: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(0,0,0,0.9); z-index: 300; }
        .btn-ui { font-size: 16px; cursor: pointer; border: 4px solid #00ff00; padding: 20px; background: #000; color: #00ff00; }
        .btn-ui:hover { background: #00ff00; color: #000; }
        #game-over-screen { display: none; }
    </style>
</head>
<body>

<canvas id="game-layer"></canvas>

<div class="hud" id="game-hud" style="display: none;">
    SCORE: <span id="score">0</span><br>
    LIVES: <span id="lives">3</span>
</div>

<div id="geo-terminal">> JBRASIL ATARI CORE...<br>> LOADING PIXELS...</div>

<div id="start-screen" class="overlay">
    <h1 style="font-size: 30px; margin-bottom: 50px; text-align: center;">JBRASIL LABS<br>INVADERS</h1>
    <div class="btn-ui" onclick="startGame()">START MISSION</div>
</div>

<div id="game-over-screen" class="overlay">
    <h1 style="color: #f00; font-size: 40px; margin-bottom: 20px;">GAME OVER</h1>
    <div class="btn-ui" onclick="startGame()">RETRY</div>
</div>

<script>
const canvas = document.getElementById("game-layer");
const ctx = canvas.getContext("2d");
let score = 0, lives = 3, gameRunning = false, tick = 0;
let enemies = [], bullets = [], particles = [];
let mouseX = innerWidth/2;

// Desenhos em Pixel Art (8x8)
const INVADER_A = [
    [0,0,1,0,0,1,0,0],
    [0,0,0,1,1,0,0,0],
    [0,1,1,1,1,1,1,0],
    [1,1,0,1,1,0,1,1],
    [1,1,1,1,1,1,1,1],
    [0,0,1,0,0,1,0,0],
    [0,1,0,1,1,0,1,0],
    [1,0,1,0,0,1,0,1]
];

const INVADER_B = [
    [0,0,0,1,1,0,0,0],
    [0,1,1,1,1,1,1,0],
    [1,1,1,1,1,1,1,1],
    [1,1,0,1,1,0,1,1],
    [1,1,1,1,1,1,1,1],
    [0,0,1,0,0,1,0,0],
    [0,1,0,1,1,0,1,0],
    [0,0,1,0,0,1,0,0]
];

function drawPixelObject(matrix, x, y, size, color) {
    ctx.fillStyle = color;
    for(let row = 0; row < matrix.length; row++) {
        for(let col = 0; col < matrix[row].length; col++) {
            if(matrix[row][col]) {
                ctx.fillRect(x + (col * size), y + (row * size), size, size);
            }
        }
    }
}

function resize() {
    canvas.width = innerWidth;
    canvas.height = innerHeight;
}
window.addEventListener("resize", resize);

class Enemy {
    constructor() {
        this.x = Math.random() * (innerWidth - 60);
        this.y = -50;
        this.speed = 2 + (score/1000);
        this.type = Math.random() > 0.5 ? INVADER_A : INVADER_B;
        this.color = ["#f00", "#0f0", "#ff0", "#f0f"][Math.floor(Math.random()*4)];
    }
    update() {
        this.y += this.speed;
        drawPixelObject(this.type, this.x, this.y, 5, this.color);
    }
}

function gameLoop() {
    ctx.fillStyle = "#000";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    
    // Estrelas estilo Atari (quadrados simples)
    ctx.fillStyle = "#fff";
    for(let i=0; i<50; i++) {
        ctx.fillRect(Math.random()*canvas.width, (tick + i*20)%canvas.height, 2, 2);
    }

    if(gameRunning) {
        tick++;
        if(tick % 60 === 0) enemies.push(new Enemy());

        // Tiros (Pixels retangulares)
        bullets.forEach((b, bi) => {
            b.y -= 10;
            ctx.fillStyle = "#fff";
            ctx.fillRect(b.x, b.y, 4, 12);
            if(b.y < 0) bullets.splice(bi, 1);
        });

        // Inimigos
        enemies.forEach((e, ei) => {
            e.update();
            if(e.y > canvas.height) {
                enemies.splice(ei, 1);
                lives--;
                if(lives <= 0) endGame();
            }

            bullets.forEach((b, bi) => {
                if(b.x > e.x && b.x < e.x + 40 && b.y > e.y && b.y < e.y + 40) {
                    enemies.splice(ei, 1);
                    bullets.splice(bi, 1);
                    score += 10;
                }
            });
        });

        // Nave Jogador (Pixel Art simples)
        const playerShip = [
            [0,0,0,1,1,0,0,0],
            [0,0,1,1,1,1,0,0],
            [1,1,1,1,1,1,1,1],
            [1,1,1,1,1,1,1,1]
        ];
        drawPixelObject(playerShip, mouseX - 20, canvas.height - 60, 5, "#0f0");
    }

    document.getElementById("score").innerText = score;
    document.getElementById("lives").innerText = lives;
    requestAnimationFrame(gameLoop);
}

function startGame() {
    document.getElementById("start-screen").style.display = "none";
    document.getElementById("game-over-screen").style.display = "none";
    document.getElementById("game-hud").style.display = "block";
    score = 0; lives = 3; enemies = []; bullets = [];
    gameRunning = true;
}

function endGame() {
    gameRunning = false;
    document.getElementById("game-over-screen").style.display = "flex";
}

addEventListener("mousemove", e => { mouseX = e.clientX; });
addEventListener("mousedown", () => { if(gameRunning) bullets.push({x: mouseX, y: canvas.height - 60}); });

resize();
gameLoop();
</script>
</body>
</html>
